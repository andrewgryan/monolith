<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
      integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
      integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
      crossorigin=""
    ></script>

    <style>
      body {
        margin: 0;
      }
      #map {
        height: 100vh;
        background: #212529;
      }
    </style>

    <!-- Leaflet.draw plugin -->
    <link
      rel="stylesheet"
      href="http://leaflet.github.io/Leaflet.draw/src/leaflet.draw.css"
    />
  </head>

  <body>
    <div id="map"></div>

    <script type="module">
      import "leaflet-draw";
      window.L = L;

      var map = L.map("map").setView([51.505, -0.09], 3);

      L.tileLayer("http://localhost:8080/{z}/{x}/{y}.png", {
        attribution: "Hi-res tiling service",
        maxZoom: 5,
      }).addTo(map);

      // FeatureGroup is to store editable layers
      var drawnItems = new L.FeatureGroup();
      drawnItems.addTo(map);
      var drawControl = new L.Control.Draw({
        edit: {
          featureGroup: drawnItems,
        },
      });
      map.addControl(drawControl);

      map.on(L.Draw.Event.CREATED, function (event) {
        console.log(event.layer.toGeoJSON());
        drawnItems.addLayer(event.layer);
      });
    </script>
  </body>
</html>
